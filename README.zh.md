# Pando - Mixin 版本稳定币多抵押发行系统

## 前言

Pando 是一个多抵押铸币系统，基于 Mixin Network 运行，通过 mtg 方案确保资金安全。mtg 节点投票治理批准可以抵押的担保品资产，来生成 pUSD。pUSD 是一种和美元 1:1 的稳定币，其发行是去中心化的，价格稳定，可以代替 USDT 在 mixin 里面流通使用。Pando 借鉴了 [MakerDao](https://makerdao.com) 协议的实现。

## Mixin Network 及 mtg 介绍

### Mixin Network

[Mixin Network](https://developers.mixin.one/document/mainnet/overview) 是基于 BFT-DAG 技术的闪电网络，支持比特币、以太坊等三十几条公链，具有转账 免手续费、到账极快、支付匿名的特点。

与当前最流行的智能合约平台以太坊比起来，Mixin 没有转账拥堵，手续费昂贵的问题，极大的方便了应用的开发和使用。

### Mixin 版本的智能合约 Mixin Trusted Group

Mixin Network 不支持智能合约，而是通过多签方案 mtg 来对资产进行去中心化管理，即 [Mixin Trusted Group](https://developers.mixin.one/document/mainnet/mtg)。例如一个 m/n 多签节点组，资产由 m 个节点方共同保管，需要转出的时候，至少需要其中的 n 个签名转账才能执行。

Pando 由 Mixin 生态内的多个团队共同组成的 Trusted Group 运营治理，这些团队就是节点方，以治理者的身份参与 Pando 的运作。用户抵押的资产全部放在这几个团队共同管理的多签钱包里面，Pando 的实现将保证所有节点在数据的修改和转账上达成一致，以保证 Pando 的正常运行。

## Pando 介绍

### 担保品

节点方可以通过投票的方式，添加任意价值资产作为抵押物来借 pUSD；同样调整抵押物的各项风险参数也需要进行节点投票。因为 Mixin 支持三十几条公链，比特币，以太坊上的所有币种等等都有可能作为担保品资产，只要节点投票通过。

### 金库

所有经过批准的担保品资产都可以存入 Pando 多签钱包创建金库来生成 pUSD，只要担保物的价格不低于最低要求，用户即享有对该金库完整且独立的控制权。

### 与 Pando 交互

不管是普通用户和节点治理方，都是通过给 Pando 多签钱包转账来与 Pando 交互，交互的方法以及参数全部写在转账的附加信息（memo）里面。

目前，为了保护隐私，memo 需要加密处理。Pando 事先生成一对 ed25519 公私钥 ，并将公钥公布出去；

用户在生成好 memo 元数据之后，也生成一对临时的 ed25519 公私钥，将私钥和 pando 公开的公钥用椭圆曲线算法生成一个 32 位的 bytes，前 16 位作为 aes 加密需要的 key，后 16 位作为 aes 加密需要的 iv，然后对 memo 元数据做 aes 加密，最后将加密后的 bytes 和用户的公钥拼接起来，base64 之后作为最终转账的 memo。

Pando 节点同步到转账之后，进行反向操作还原出 aes 加密的 key 和 iv，然后解密出方法的类型和参数。

节点之间需要保证按同样的顺序处理用户的交互，以保证存放在数据库中的数据和其他节点完全一致；同样在转账的时候也要按照同样的顺序，以保证所有节点在完成转账的时候选择同样的 utxo。

### 清算高风险金库

为了确保 Pando 中始终有足够的担保物来为借出去的 pUSD 背书，金库都会要求超额抵押比如 150%。

当因为市场价格波动导致抵押的资产的价值不足时，金库就会进入高风险状态而被清算，以赎回该金库借出去的 pUSD，其中包括清算罚金。

清算以拍卖的形式进行，如果拍卖获得的 pUSD 足以清偿金库内的债务，并足够支付清算罚金，该竞拍会转换成反向担保品竞拍尽可能地减少担保物的出售数量。剩余的担保物都会物归原主；如果担保物竞拍获得的 pUSD 不足以清偿金库内的债务，亏损部分就会变成 Pando 的负债，由节点共同承担。

### 价格预言机

Pando 需要同步担保物资产的价格，从而更新金库的抵押率，并清算高风险金库。

Pando 的价格依赖一个外部的去中心化喂价服务，但并不是直接使用喂价服务的价格，而是延迟一个小时，在此期间，如果发现有喂价机被攻击者控制，节点可以通过投票紧急将抵押品状态冻结；必要时也可以通过投票选出新的价格。

## 总结和展望

总的来说，Pando 实现了在互相信任的节点之间的去中心化，将稳定币借贷这项金融服务带给 Mixin Network 的所有用户。

同时 Pando 也保留了扩展出借出非稳定币的资产的能力，例如可以在 Mixin 网络发行和 Tesla 股票 1:1 的代币 pTesla，然后在 Pando 抵押比特币借出，让 Mixin 里面的资产和外部的资产联动起来。
